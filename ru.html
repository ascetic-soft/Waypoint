<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Waypoint ‚Äî –õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π PSR-15 PHP-—Ä–æ—É—Ç–µ—Ä</title>
    <meta name="description" content="–õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π PSR-15 —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π PHP-—Ä–æ—É—Ç–µ—Ä —Å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–µ–π –Ω–∞ –∞—Ç—Ä–∏–±—É—Ç–∞—Ö, prefix-trie —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ–º, –∫–æ–Ω–≤–µ–π–µ—Ä–æ–º middleware, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–æ–π.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <link rel="stylesheet" href="assets/style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìç</text></svg>">
</head>
<body>

<!-- ============ SIDEBAR NAV ============ -->
<aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
        <a href="#" class="logo">
            <span class="logo-icon">W</span>
            <span class="logo-text">Waypoint</span>
        </a>
        <button class="sidebar-close" id="sidebar-close" aria-label="–ó–∞–∫—Ä—ã—Ç—å –º–µ–Ω—é">&times;</button>
    </div>
    <nav class="sidebar-nav">
        <ul>
            <li class="nav-section-title">–ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã</li>
            <li><a href="#introduction">–í–≤–µ–¥–µ–Ω–∏–µ</a></li>
            <li><a href="#installation">–£—Å—Ç–∞–Ω–æ–≤–∫–∞</a></li>
            <li><a href="#quick-start">–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç</a></li>

            <li class="nav-section-title">–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏</li>
            <li><a href="#route-registration">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤</a></li>
            <li><a href="#route-parameters">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤</a></li>
            <li><a href="#attribute-routing">–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –∞—Ç—Ä–∏–±—É—Ç—ã</a></li>
            <li><a href="#route-groups">–ì—Ä—É–ø–ø—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤</a></li>
            <li><a href="#middleware">Middleware</a></li>

            <li class="nav-section-title">–ü—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ</li>
            <li><a href="#dependency-injection">–í–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π</a></li>
            <li><a href="#url-generation">–ì–µ–Ω–µ—Ä–∞—Ü–∏—è URL</a></li>
            <li><a href="#route-caching">–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤</a></li>
            <li><a href="#diagnostics">–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</a></li>
            <li><a href="#exception-handling">–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π</a></li>

            <li class="nav-section-title">–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫</li>
            <li><a href="#architecture">–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞</a></li>
            <li><a href="#api-reference">API-—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫</a></li>
            <li><a href="#development">–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞</a></li>
        </ul>
    </nav>
    <div class="sidebar-footer">
        <a href="index.html" class="lang-switch" title="Switch to English">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"/></svg>
            <span>English</span>
        </a>
        <a href="https://github.com/ascetic-soft/Waypoint" class="github-link" target="_blank" rel="noopener">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
            <span>GitHub</span>
        </a>
        <a href="https://packagist.org/packages/ascetic-soft/waypoint" class="packagist-link" target="_blank" rel="noopener">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M0 1.398v21.204h24V1.398H0zm16.473 6.837l-3.446 1.283-.375.14-.373-.14L8.83 8.235 5.293 9.548l1.313.489 2.224.83 3.445 1.283.375.14.373-.14 3.447-1.283 2.224-.83 1.313-.489-3.534-1.313zm-4.194 4.252L8.85 11.2l-3.445-1.283-1.84-.685v7.623l8.714 3.245V12.487zm.748 0v8.613l8.714-3.245v-7.623l-1.84.685-3.445 1.283-3.429 1.287z"/></svg>
            <span>Packagist</span>
        </a>
    </div>
</aside>

<!-- ============ MAIN CONTENT ============ -->
<main class="main">
    <!-- Mobile Header -->
    <header class="mobile-header">
        <button class="hamburger" id="hamburger" aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é">
            <span></span><span></span><span></span>
        </button>
        <a href="#" class="mobile-logo">
            <span class="logo-icon">W</span>
            <span>Waypoint</span>
        </a>
    </header>

    <div class="content">
        <!-- ============ HERO ============ -->
        <section class="hero" id="introduction">
            <div class="hero-badges">
                <a href="https://github.com/ascetic-soft/Waypoint/actions/workflows/ci.yml" target="_blank" rel="noopener"><img src="https://github.com/ascetic-soft/Waypoint/actions/workflows/ci.yml/badge.svg" alt="CI"></a>
                <a href="https://codecov.io/gh/ascetic-soft/Waypoint" target="_blank" rel="noopener"><img src="https://codecov.io/gh/ascetic-soft/Waypoint/graph/badge.svg" alt="codecov"></a>
                <img src="https://img.shields.io/badge/phpstan-level%209-brightgreen" alt="PHPStan Level 9">
                <a href="https://packagist.org/packages/ascetic-soft/waypoint" target="_blank" rel="noopener"><img src="https://img.shields.io/packagist/v/ascetic-soft/waypoint" alt="Latest Version"></a>
                <img src="https://img.shields.io/packagist/dependency-v/ascetic-soft/waypoint/php" alt="PHP Version">
                <a href="https://packagist.org/packages/ascetic-soft/waypoint" target="_blank" rel="noopener"><img src="https://img.shields.io/packagist/l/ascetic-soft/waypoint" alt="License"></a>
            </div>
            <h1>Waypoint</h1>
            <p class="hero-subtitle">–õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π –∏ –±—ã—Å—Ç—Ä—ã–π PSR-15 PHP-—Ä–æ—É—Ç–µ—Ä —Å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–µ–π –Ω–∞ –∞—Ç—Ä–∏–±—É—Ç–∞—Ö, prefix-trie —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ–º, –∫–æ–Ω–≤–µ–π–µ—Ä–æ–º middleware, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–æ–π.</p>
            <div class="hero-install">
                <code>composer require ascetic-soft/waypoint</code>
                <button class="copy-btn" data-copy="composer require ascetic-soft/waypoint" aria-label="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/></svg>
                </button>
            </div>
        </section>

        <!-- ============ FEATURES ============ -->
        <section class="features">
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
                    </div>
                    <h3>PSR-15 —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π</h3>
                    <p>–†–µ–∞–ª–∏–∑—É–µ—Ç <code>RequestHandlerInterface</code>. –†–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º PSR-7 / PSR-15 —Å—Ç–µ–∫–æ–º.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>
                    </div>
                    <h3>Prefix-Trie —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ</h3>
                    <p>–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–µ–≥–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–µ—à–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ O(1) —Ö–µ—à-—Ç–∞–±–ª–∏—Ü—É. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Å–µ–≥–º–µ–Ω—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z"/></svg>
                    </div>
                    <h3>–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –∞—Ç—Ä–∏–±—É—Ç—ã</h3>
                    <p>–û–±—ä—è–≤–ª—è–π—Ç–µ –º–∞—Ä—à—Ä—É—Ç—ã —Å –ø–æ–º–æ—â—å—é PHP 8 –∞—Ç—Ä–∏–±—É—Ç–æ–≤ <code>#[Route]</code> –ø—Ä—è–º–æ –Ω–∞ –∫–ª–∞—Å—Å–∞—Ö –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3.01" y2="6"/><line x1="3" y1="12" x2="3.01" y2="12"/><line x1="3" y1="18" x2="3.01" y2="18"/></svg>
                    </div>
                    <h3>–ö–æ–Ω–≤–µ–π–µ—Ä Middleware</h3>
                    <p>–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –∏ –º–∞—Ä—à—Ä—É—Ç–Ω—ã–µ PSR-15 middleware —Å FIFO-–ø–æ—Ä—è–¥–∫–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z"/></svg>
                    </div>
                    <h3>–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤</h3>
                    <p>–ö–æ–º–ø–∏–ª—è—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ PHP-—Ñ–∞–π–ª –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —á–µ—Ä–µ–∑ OPcache –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
                    </div>
                    <h3>–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</h3>
                    <p>–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è –ø—É—Ç–µ–π, –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –∏–º—ë–Ω –∏ –ø–µ—Ä–µ–∫—Ä—ã—Ç—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ —Å –ø–æ–º–æ—â—å—é –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤.</p>
                </div>
            </div>
        </section>

        <!-- ============ REQUIREMENTS ============ -->
        <section class="doc-section" id="installation">
            <h2>–£—Å—Ç–∞–Ω–æ–≤–∫–∞</h2>
            <div class="requirements-box">
                <h3>–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è</h3>
                <ul>
                    <li>PHP &ge; 8.4</li>
                    <li><code>ext-mbstring</code></li>
                </ul>
            </div>
            <p>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Waypoint —á–µ—Ä–µ–∑ Composer:</p>
            <pre><code class="language-bash">composer require ascetic-soft/waypoint</code></pre>
        </section>

        <!-- ============ QUICK START ============ -->
        <section class="doc-section" id="quick-start">
            <h2>–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç</h2>
            <p>–ù–∞—á–Ω–∏—Ç–µ —Ä–∞–±–æ—Ç—É –∑–∞ —Å–µ–∫—É–Ω–¥—ã. –°–æ–∑–¥–∞–π—Ç–µ —Ä–æ—É—Ç–µ—Ä, –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –º–∞—Ä—à—Ä—É—Ç –∏ –æ–±—Ä–∞–±–æ—Ç–∞–π—Ç–µ –∑–∞–ø—Ä–æ—Å:</p>
            <pre><code class="language-php">use AsceticSoft\Waypoint\Router;
use Nyholm\Psr7\ServerRequest;

$router = new Router($container); // –ª—é–±–æ–π PSR-11 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

$router->get('/hello/{name}', function (string $name) use ($responseFactory) {
    $response = $responseFactory->createResponse();
    $response->getBody()->write("Hello, {$name}!");
    return $response;
});

$request  = new ServerRequest('GET', '/hello/world');
$response = $router->handle($request);</code></pre>
        </section>

        <!-- ============ ROUTE REGISTRATION ============ -->
        <section class="doc-section" id="route-registration">
            <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤</h2>
            <p>–†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –º–∞—Ä—à—Ä—É—Ç—ã —Å –ø–æ–º–æ—â—å—é fluent API. –î–æ—Å—Ç—É–ø–Ω—ã —Å–æ–∫—Ä–∞—â—ë–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö HTTP-–≥–ª–∞–≥–æ–ª–æ–≤:</p>
            <pre><code class="language-php">// –ü–æ–ª–Ω–∞—è —Ñ–æ—Ä–º–∞
$router->addRoute('/users', [UserController::class, 'list'], methods: ['GET']);

// –°–æ–∫—Ä–∞—â–µ–Ω–∏—è
$router->get('/users',          [UserController::class, 'list']);
$router->post('/users',         [UserController::class, 'create']);
$router->put('/users/{id}',     [UserController::class, 'update']);
$router->delete('/users/{id}',  [UserController::class, 'destroy']);</code></pre>

            <h3>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–µ—Ç–æ–¥–æ–≤</h3>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>–ü–∞—Ä–∞–º–µ—Ç—Ä</th>
                            <th>–¢–∏–ø</th>
                            <th>–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é</th>
                            <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td><code>$path</code></td><td><code>string</code></td><td>&mdash;</td><td>–®–∞–±–ª–æ–Ω –º–∞—Ä—à—Ä—É—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, <code>/users/{id}</code>)</td></tr>
                        <tr><td><code>$handler</code></td><td><code>array|Closure</code></td><td>&mdash;</td><td><code>[Class::class, 'method']</code> –∏–ª–∏ –∑–∞–º—ã–∫–∞–Ω–∏–µ</td></tr>
                        <tr><td><code>$middleware</code></td><td><code>string[]</code></td><td><code>[]</code></td><td>Middleware –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞</td></tr>
                        <tr><td><code>$name</code></td><td><code>string</code></td><td><code>''</code></td><td>–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –∏–º—è –º–∞—Ä—à—Ä—É—Ç–∞</td></tr>
                        <tr><td><code>$priority</code></td><td><code>int</code></td><td><code>0</code></td><td>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è (—á–µ–º –≤—ã—à–µ, —Ç–µ–º —Ä–∞–Ω—å—à–µ)</td></tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- ============ ROUTE PARAMETERS ============ -->
        <section class="doc-section" id="route-parameters">
            <h2>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤</h2>
            <p>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤ –≤ —Å—Ç–∏–ª–µ FastRoute. –û–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–Ω–µ–¥—Ä—è—é—Ç—Å—è –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ –∏–º–µ–Ω–∏ —Å –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ–º —Ç–∏–ø–æ–≤ –¥–ª—è —Å–∫–∞–ª—è—Ä–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π.</p>
            <pre><code class="language-php">// –ë–∞–∑–æ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä ‚Äî —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ª—é–±–æ–º—É —Å–µ–≥–º–µ–Ω—Ç—É –±–µ–∑ —Å–ª–µ—à–∞
$router->get('/users/{id}', [UserController::class, 'show']);

// –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä ‚Äî —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã
$router->get('/users/{id:\d+}', [UserController::class, 'show']);

// –ù–µ—Å–∫–æ–ª—å–∫–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
$router->get('/posts/{year:\d{4}}/{slug}', [PostController::class, 'show']);</code></pre>
            <div class="callout callout-info">
                <strong>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ —Ç–∏–ø–æ–≤</strong>
                <p>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–∞—Ä—à—Ä—É—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–≤–æ–¥—è—Ç—Å—è –∫ —Ç–∏–ø—É, –æ–±—ä—è–≤–ª–µ–Ω–Ω–æ–º—É –≤ —Å–∏–≥–Ω–∞—Ç—É—Ä–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, <code>int $id</code> –ø–æ–ª—É—á–∏—Ç —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –∞ –Ω–µ —Å—Ç—Ä–æ–∫—É.</p>
            </div>
            <pre><code class="language-php">$router->get('/users/{id:\d+}', function (int $id) {
    // $id –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–≤–µ–¥—ë–Ω –∫ int
});</code></pre>
        </section>

        <!-- ============ ATTRIBUTE ROUTING ============ -->
        <section class="doc-section" id="attribute-routing">
            <h2>–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –∞—Ç—Ä–∏–±—É—Ç—ã</h2>
            <p>–û–±—ä—è–≤–ª—è–π—Ç–µ –º–∞—Ä—à—Ä—É—Ç—ã –ø—Ä—è–º–æ –Ω–∞ –∫–ª–∞—Å—Å–∞—Ö –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ —Å –ø–æ–º–æ—â—å—é –∞—Ç—Ä–∏–±—É—Ç–∞ <code>#[Route]</code>. –ê—Ç—Ä–∏–±—É—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–ª–∞—Å—Å–∞ –∑–∞–¥–∞—ë—Ç –ø—Ä–µ—Ñ–∏–∫—Å –ø—É—Ç–∏ –∏ –æ–±—â–∏–µ middleware; –∞—Ç—Ä–∏–±—É—Ç—ã –Ω–∞ –º–µ—Ç–æ–¥–∞—Ö –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã.</p>
            <pre><code class="language-php">use AsceticSoft\Waypoint\Attribute\Route;

#[Route('/api/users', middleware: [AuthMiddleware::class])]
class UserController
{
    #[Route('/', methods: ['GET'], name: 'users.list')]
    public function list(): ResponseInterface { /* ... */ }

    #[Route('/{id:\d+}', methods: ['GET'], name: 'users.show')]
    public function show(int $id): ResponseInterface { /* ... */ }

    #[Route('/', methods: ['POST'], name: 'users.create')]
    public function create(ServerRequestInterface $request): ResponseInterface { /* ... */ }

    #[Route('/{id:\d+}', methods: ['PUT'], name: 'users.update')]
    public function update(int $id, ServerRequestInterface $request): ResponseInterface { /* ... */ }

    #[Route('/{id:\d+}', methods: ['DELETE'], name: 'users.delete')]
    public function delete(int $id): ResponseInterface { /* ... */ }
}</code></pre>
            <p>–ê—Ç—Ä–∏–±—É—Ç —è–≤–ª—è–µ—Ç—Å—è <strong>–ø–æ–≤—Ç–æ—Ä—è–µ–º—ã–º</strong>, –ø–æ—ç—Ç–æ–º—É –æ–¥–∏–Ω –º–µ—Ç–æ–¥ –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∞—Ä—à—Ä—É—Ç–æ–≤.</p>

            <h3>–ó–∞–≥—Ä—É–∑–∫–∞ –∞—Ç—Ä–∏–±—É—Ç–æ–≤</h3>
            <pre><code class="language-php">// –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª–∞—Å—Å—ã –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤
$router->loadAttributes(
    UserController::class,
    PostController::class,
);

// –ò–ª–∏ –ø—Ä–æ—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
$router->scanDirectory(__DIR__ . '/Controllers', 'App\\Controllers');</code></pre>

            <h3>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∞—Ç—Ä–∏–±—É—Ç–∞</h3>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>–ü–∞—Ä–∞–º–µ—Ç—Ä</th>
                            <th>–¢–∏–ø</th>
                            <th>–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é</th>
                            <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td><code>$path</code></td><td><code>string</code></td><td><code>''</code></td><td>–®–∞–±–ª–æ–Ω –ø—É—Ç–∏ (–ø—Ä–µ—Ñ–∏–∫—Å –Ω–∞ –∫–ª–∞—Å—Å–µ, –º–∞—Ä—à—Ä—É—Ç –Ω–∞ –º–µ—Ç–æ–¥–µ)</td></tr>
                        <tr><td><code>$methods</code></td><td><code>string[]</code></td><td><code>['GET']</code></td><td>HTTP-–º–µ—Ç–æ–¥—ã (–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–ª–∞—Å—Å–∞)</td></tr>
                        <tr><td><code>$name</code></td><td><code>string</code></td><td><code>''</code></td><td>–ò–º—è –º–∞—Ä—à—Ä—É—Ç–∞</td></tr>
                        <tr><td><code>$middleware</code></td><td><code>string[]</code></td><td><code>[]</code></td><td>Middleware (–Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–ª–∞—Å—Å–∞ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –ø–µ—Ä–µ–¥ —É—Ä–æ–≤–Ω–µ–º –º–µ—Ç–æ–¥–∞)</td></tr>
                        <tr><td><code>$priority</code></td><td><code>int</code></td><td><code>0</code></td><td>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è (—á–µ–º –≤—ã—à–µ, —Ç–µ–º —Ä–∞–Ω—å—à–µ)</td></tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- ============ ROUTE GROUPS ============ -->
        <section class="doc-section" id="route-groups">
            <h2>–ì—Ä—É–ø–ø—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤</h2>
            <p>–û–±—ä–µ–¥–∏–Ω—è–π—Ç–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –ø–æ–¥ –æ–±—â–∏–º –ø—Ä–µ—Ñ–∏–∫—Å–æ–º –∏ middleware. –ì—Ä—É–ø–ø—ã –º–æ–≥—É—Ç –±—ã—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ &mdash; –ø—Ä–µ—Ñ–∏–∫—Å—ã –∏ middleware –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö –∫ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º –≥—Ä—É–ø–ø–∞–º.</p>
            <pre><code class="language-php">$router->group('/api', function (Router $router) {

    $router->group('/v1', function (Router $router) {
        $router->get('/users', [UserController::class, 'list']);
        // –°–æ–≤–ø–∞–¥–µ–Ω–∏–µ: /api/v1/users
    });

    $router->group('/v2', function (Router $router) {
        $router->get('/users', [UserV2Controller::class, 'list']);
        // –°–æ–≤–ø–∞–¥–µ–Ω–∏–µ: /api/v2/users
    });

}, middleware: [ApiAuthMiddleware::class]);</code></pre>
        </section>

        <!-- ============ MIDDLEWARE ============ -->
        <section class="doc-section" id="middleware">
            <h2>Middleware</h2>
            <p>Waypoint –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç PSR-15 middleware –Ω–∞ –¥–≤—É—Ö —É—Ä–æ–≤–Ω—è—Ö:</p>

            <h3>–ì–ª–æ–±–∞–ª—å–Ω—ã–µ Middleware</h3>
            <p>–í—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞:</p>
            <pre><code class="language-php">$router->addMiddleware(CorsMiddleware::class);
$router->addMiddleware(new RateLimitMiddleware(limit: 100));</code></pre>

            <h3>–ú–∞—Ä—à—Ä—É—Ç–Ω—ã–µ Middleware</h3>
            <p>–ü—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –º–∞—Ä—à—Ä—É—Ç–∞–º:</p>
            <pre><code class="language-php">$router->get('/admin/dashboard', [AdminController::class, 'dashboard'],
    middleware: [AdminAuthMiddleware::class],
);</code></pre>

            <div class="callout callout-tip">
                <strong>–ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</strong>
                <p>Middleware —Ä–∞–∑—Ä–µ—à–∞—é—Ç—Å—è –∏–∑ PSR-11 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –≤ –≤–∏–¥–µ —Å—Ç—Ä–æ–∫–∏ —Å –∏–º–µ–Ω–µ–º –∫–ª–∞—Å—Å–∞, –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –≤ –≤–∏–¥–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞. –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è FIFO: —Å–Ω–∞—á–∞–ª–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ middleware, –∑–∞—Ç–µ–º –º–∞—Ä—à—Ä—É—Ç–Ω—ã–µ, –∑–∞—Ç–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞.</p>
            </div>
        </section>

        <!-- ============ DEPENDENCY INJECTION ============ -->
        <section class="doc-section" id="dependency-injection">
            <h2>–í–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π</h2>
            <p><code>RouteHandler</code> –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–µ—Ç–æ–¥–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –≤ —Å–ª–µ–¥—É—é—â–µ–º –ø–æ—Ä—è–¥–∫–µ:</p>
            <ol class="di-order">
                <li><code>ServerRequestInterface</code> &mdash; —Ç–µ–∫—É—â–∏–π PSR-7 –∑–∞–ø—Ä–æ—Å</li>
                <li><strong>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–∞—Ä—à—Ä—É—Ç–∞</strong> &mdash; —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –ø–æ –∏–º–µ–Ω–∏ —Å –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ–º —Ç–∏–ø–æ–≤ (<code>int</code>, <code>float</code>, <code>bool</code>)</li>
                <li><strong>–°–µ—Ä–≤–∏—Å—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞</strong> &mdash; —Ä–∞–∑—Ä–µ—à–∞—é—Ç—Å—è –∏–∑ PSR-11 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø–æ type-hint</li>
                <li><strong>–ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é</strong> &mdash; –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è, –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã</li>
                <li><strong>Nullable-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã</strong> &mdash; –ø–æ–ª—É—á–∞—é—Ç <code>null</code></li>
            </ol>
            <pre><code class="language-php">#[Route('/orders/{id:\d+}', methods: ['GET'])]
public function show(
    int $id,                          // –ø–∞—Ä–∞–º–µ—Ç—Ä –º–∞—Ä—à—Ä—É—Ç–∞ (–∞–≤—Ç–æ-–ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ)
    ServerRequestInterface $request,  // —Ç–µ–∫—É—â–∏–π –∑–∞–ø—Ä–æ—Å
    OrderRepository $repo,            // –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
    ?LoggerInterface $logger = null,  // –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
): ResponseInterface {
    // ...
}</code></pre>
        </section>

        <!-- ============ URL GENERATION ============ -->
        <section class="doc-section" id="url-generation">
            <h2>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è URL</h2>
            <p>–ì–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ URL –∏–∑ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ (–æ–±—Ä–∞—Ç–Ω–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è). –ü—Ä–∏—Å–≤–æ–π—Ç–µ –∏–º–µ–Ω–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤, –∑–∞—Ç–µ–º –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ <code>generate()</code> –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –ø—É—Ç–µ–π:</p>
            <pre><code class="language-php">// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤
$router->get('/users',          [UserController::class, 'list'], name: 'users.list');
$router->get('/users/{id:\d+}', [UserController::class, 'show'], name: 'users.show');

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è URL
$url = $router->generate('users.show', ['id' => 42]);
// => /users/42

$url = $router->generate('users.list', query: ['page' => 2, 'limit' => 10]);
// => /users?page=2&limit=10</code></pre>
            <p>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ URL-–∫–æ–¥–∏—Ä—É—é—Ç—Å—è. –õ–∏—à–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –≤ —à–∞–±–ª–æ–Ω–µ –º–∞—Ä—à—Ä—É—Ç–∞, –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è. –ù–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤—ã–∑—ã–≤–∞—é—Ç <code>MissingParametersException</code>.</p>

            <h3>–ü—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ UrlGenerator</h3>
            <pre><code class="language-php">use AsceticSoft\Waypoint\UrlGenerator;

$generator = new UrlGenerator($router->getRouteCollection());
$url = $generator->generate('users.show', ['id' => 42]);</code></pre>
        </section>

        <!-- ============ ROUTE CACHING ============ -->
        <section class="doc-section" id="route-caching">
            <h2>–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤</h2>
            <p>–°–∫–æ–º–ø–∏–ª–∏—Ä—É–π—Ç–µ –º–∞—Ä—à—Ä—É—Ç—ã –≤ PHP-—Ñ–∞–π–ª –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ. –§–∞–π–ª –∫—ç—à–∞ &mdash; –æ–±—ã—á–Ω—ã–π PHP-–º–∞—Å—Å–∏–≤, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ —á–µ—Ä–µ–∑ OPcache, –º–∏–Ω—É—è Reflection –∏ –ø–∞—Ä—Å–∏–Ω–≥ –∞—Ç—Ä–∏–±—É—Ç–æ–≤.</p>

            <h3>–ö–æ–º–ø–∏–ª—è—Ü–∏—è –∫—ç—à–∞</h3>
            <pre><code class="language-php">// –í–æ –≤—Ä–µ–º—è –¥–µ–ø–ª–æ—è / –ø—Ä–æ–≥—Ä–µ–≤–∞ –∫—ç—à–∞
$router->compileTo(__DIR__ . '/cache/routes.php');</code></pre>

            <h3>–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –∫—ç—à–∞</h3>
            <pre><code class="language-php">$cacheFile = __DIR__ . '/cache/routes.php';

$router = new Router($container);

if (file_exists($cacheFile)) {
    $router->loadCache($cacheFile);
} else {
    $router->scanDirectory(__DIR__ . '/Controllers', 'App\\Controllers');
    $router->compileTo($cacheFile);
}</code></pre>
        </section>

        <!-- ============ DIAGNOSTICS ============ -->
        <section class="doc-section" id="diagnostics">
            <h2>–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤</h2>
            <p>–ò–Ω—Å–ø–µ–∫—Ç–∏—Ä—É–π—Ç–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –∏ –≤—ã—è–≤–ª—è–π—Ç–µ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –≤–æ –≤—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:</p>
            <pre><code class="language-php">use AsceticSoft\Waypoint\Diagnostic\RouteDiagnostics;

$diagnostics = new RouteDiagnostics($router->getRouteCollection());

// –í—ã–≤–µ—Å—Ç–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ç–∞–±–ª–∏—Ü—É –º–∞—Ä—à—Ä—É—Ç–æ–≤
$diagnostics->listRoutes();

// –û–±–Ω–∞—Ä—É–∂–∏—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã
$report = $diagnostics->findConflicts();

if ($report->hasIssues()) {
    $diagnostics->printReport();
}</code></pre>

            <h3>–û–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ–º—ã–µ –ø—Ä–æ–±–ª–µ–º—ã</h3>
            <div class="diagnostics-grid">
                <div class="diagnostic-card">
                    <div class="diagnostic-icon warning">!</div>
                    <h4>–î—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –ø—É—Ç–∏</h4>
                    <p>–ú–∞—Ä—à—Ä—É—Ç—ã —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ —à–∞–±–ª–æ–Ω–∞–º–∏ –∏ –ø–µ—Ä–µ—Å–µ–∫–∞—é—â–∏–º–∏—Å—è HTTP-–º–µ—Ç–æ–¥–∞–º–∏.</p>
                </div>
                <div class="diagnostic-card">
                    <div class="diagnostic-icon error">!</div>
                    <h4>–î—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –∏–º–µ–Ω–∞</h4>
                    <p>–ù–µ—Å–∫–æ–ª—å–∫–æ –º–∞—Ä—à—Ä—É—Ç–æ–≤ —Å –æ–¥–Ω–∏–º –∏ —Ç–µ–º –∂–µ –∏–º–µ–Ω–µ–º.</p>
                </div>
                <div class="diagnostic-card">
                    <div class="diagnostic-icon info">!</div>
                    <h4>–ü–µ—Ä–µ–∫—Ä—ã—Ç—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã</h4>
                    <p>–ë–æ–ª–µ–µ –æ–±—â–∏–π —à–∞–±–ª–æ–Ω, –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–Ω—å—à–µ, —Å–∫—Ä—ã–≤–∞–µ—Ç –±–æ–ª–µ–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π.</p>
                </div>
            </div>
        </section>

        <!-- ============ EXCEPTION HANDLING ============ -->
        <section class="doc-section" id="exception-handling">
            <h2>–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π</h2>
            <p>Waypoint –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏:</p>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>–ò—Å–∫–ª—é—á–µ–Ω–∏–µ</th>
                            <th>HTTP-–∫–æ–¥</th>
                            <th>–ö–æ–≥–¥–∞</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td><code>RouteNotFoundException</code></td><td>404</td><td>–ù–∏ –æ–¥–∏–Ω —à–∞–±–ª–æ–Ω –º–∞—Ä—à—Ä—É—Ç–∞ –Ω–µ —Å–æ–≤–ø–∞–ª —Å URI</td></tr>
                        <tr><td><code>MethodNotAllowedException</code></td><td>405</td><td>URI —Å–æ–≤–ø–∞–ª, –Ω–æ HTTP-–º–µ—Ç–æ–¥ –Ω–µ —Ä–∞–∑—Ä–µ—à—ë–Ω</td></tr>
                        <tr><td><code>RouteNameNotFoundException</code></td><td>&mdash;</td><td>–ú–∞—Ä—à—Ä—É—Ç —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –∏–º–µ–Ω–µ–º –Ω–µ –Ω–∞–π–¥–µ–Ω (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è URL)</td></tr>
                        <tr><td><code>MissingParametersException</code></td><td>&mdash;</td><td>–ù–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–∞—Ä—à—Ä—É—Ç–∞</td></tr>
                    </tbody>
                </table>
            </div>
            <pre><code class="language-php">use AsceticSoft\Waypoint\Exception\RouteNotFoundException;
use AsceticSoft\Waypoint\Exception\MethodNotAllowedException;

try {
    $response = $router->handle($request);
} catch (RouteNotFoundException $e) {
    // –í–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç 404
} catch (MethodNotAllowedException $e) {
    // –í–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç 405 —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º Allow
    $allowed = implode(', ', $e->getAllowedMethods());
}</code></pre>
        </section>

        <!-- ============ ARCHITECTURE ============ -->
        <section class="doc-section" id="architecture">
            <h2>–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞</h2>
            <p>Waypoint –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ, –≥–¥–µ –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–º–µ–µ—Ç –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—É—é –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:</p>
            <div class="architecture-diagram">
                <pre class="arch-tree"><code>Router  (PSR-15 RequestHandlerInterface)
‚îú‚îÄ‚îÄ RouteCollection
‚îÇ   ‚îú‚îÄ‚îÄ RouteTrie           ‚Äî –ø—Ä–µ—Ñ–∏–∫—Å–Ω–æ–µ –¥–µ—Ä–µ–≤–æ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ Route[]             ‚Äî –ª–∏–Ω–µ–π–Ω–æ–µ regex-—Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤
‚îú‚îÄ‚îÄ AttributeRouteLoader    ‚Äî —á—Ç–µ–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ #[Route] —á–µ—Ä–µ–∑ Reflection
‚îú‚îÄ‚îÄ MiddlewarePipeline      ‚Äî FIFO-–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ PSR-15 middleware
‚îú‚îÄ‚îÄ RouteHandler            ‚Äî –≤—ã–∑–æ–≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ —Å –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
‚îú‚îÄ‚îÄ UrlGenerator            ‚Äî –æ–±—Ä–∞—Ç–Ω–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è (–∏–º—è + –ø–∞—Ä–∞–º–µ—Ç—Ä—ã ‚Üí URL)
‚îú‚îÄ‚îÄ RouteCompiler           ‚Äî –∫–æ–º–ø–∏–ª—è—Ü–∏—è/–∑–∞–≥—Ä—É–∑–∫–∞ –∫—ç—à–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤
‚îî‚îÄ‚îÄ RouteDiagnostics        ‚Äî –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –∏ –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å</code></pre>
            </div>
            <div class="callout callout-info">
                <strong>–û –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</strong>
                <p><code>RouteTrie</code> –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –º–∞—Ä—à—Ä—É—Ç–æ–≤ —Å O(1) –ø–æ–∏—Å–∫–æ–º –Ω–∞ —Å–µ–≥–º–µ–Ω—Ç. –ú–∞—Ä—à—Ä—É—Ç—ã —Å —à–∞–±–ª–æ–Ω–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –≤—ã—Ä–∞–∑–∏—Ç—å –≤ –¥–µ—Ä–µ–≤–µ (—Å–º–µ—à–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ/–ø–∞—Ä–∞–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ —Å–µ–≥–º–µ–Ω—Ç—ã –≤—Ä–æ–¥–µ <code>prefix-{name}.txt</code> –∏–ª–∏ –∑–∞—Ö–≤–∞—Ç—ã —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–≥–º–µ–Ω—Ç–æ–≤), –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ª–∏–Ω–µ–π–Ω–æ–µ regex-—Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ.</p>
            </div>
        </section>

        <!-- ============ API REFERENCE ============ -->
        <section class="doc-section" id="api-reference">
            <h2>API-—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫</h2>

            <h3>Router</h3>
            <div class="api-method">
                <code class="method-sig">addRoute(string $path, array|Closure $handler, array $methods, array $middleware, string $name, int $priority): void</code>
                <p>–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω—ã—Ö HTTP-–º–µ—Ç–æ–¥–æ–≤.</p>
            </div>
            <div class="api-method">
                <code class="method-sig">get|post|put|delete|patch(string $path, array|Closure $handler, ...): void</code>
                <p>–°–æ–∫—Ä–∞—â—ë–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è HTTP-–≥–ª–∞–≥–æ–ª–æ–≤.</p>
            </div>
            <div class="api-method">
                <code class="method-sig">group(string $prefix, Closure $callback, array $middleware): void</code>
                <p>–°–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã –ø–æ–¥ –æ–±—â–∏–º –ø—Ä–µ—Ñ–∏–∫—Å–æ–º —Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ middleware.</p>
            </div>
            <div class="api-method">
                <code class="method-sig">addMiddleware(string|MiddlewareInterface $middleware): void</code>
                <p>–î–æ–±–∞–≤–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–π middleware.</p>
            </div>
            <div class="api-method">
                <code class="method-sig">loadAttributes(string ...$classes): void</code>
                <p>–ó–∞–≥—Ä—É–∑–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã –∏–∑ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ <code>#[Route]</code> —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤.</p>
            </div>
            <div class="api-method">
                <code class="method-sig">scanDirectory(string $directory, string $namespace): void</code>
                <p>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã, —Å–∫–∞–Ω–∏—Ä—É—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é.</p>
            </div>
            <div class="api-method">
                <code class="method-sig">handle(ServerRequestInterface $request): ResponseInterface</code>
                <p>PSR-15 –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–ø—Ä–æ—Å–∞. –°–æ–ø–æ—Å—Ç–∞–≤–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç –∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —á–µ—Ä–µ–∑ –∫–æ–Ω–≤–µ–π–µ—Ä middleware.</p>
            </div>
            <div class="api-method">
                <code class="method-sig">generate(string $name, array $params, array $query): string</code>
                <p>–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å URL –∏–∑ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞.</p>
            </div>
            <div class="api-method">
                <code class="method-sig">compileTo(string $file): void</code>
                <p>–°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã –≤ —Ñ–∞–π–ª –∫—ç—à–∞.</p>
            </div>
            <div class="api-method">
                <code class="method-sig">loadCache(string $file): void</code>
                <p>–ó–∞–≥—Ä—É–∑–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã –∏–∑ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –∫—ç—à–∞.</p>
            </div>

            <h3>RouteCollection</h3>
            <div class="api-method">
                <code class="method-sig">add(Route $route): void</code>
                <p>–î–æ–±–∞–≤–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é.</p>
            </div>
            <div class="api-method">
                <code class="method-sig">match(string $method, string $uri): RouteMatchResult</code>
                <p>–°–æ–ø–æ—Å—Ç–∞–≤–∏—Ç—å HTTP-–º–µ—Ç–æ–¥ –∏ URI —Å –º–∞—Ä—à—Ä—É—Ç–æ–º.</p>
            </div>
            <div class="api-method">
                <code class="method-sig">all(): Route[]</code>
                <p>–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É.</p>
            </div>
            <div class="api-method">
                <code class="method-sig">findByName(string $name): ?Route</code>
                <p>–ù–∞–π—Ç–∏ –º–∞—Ä—à—Ä—É—Ç –ø–æ –∏–º–µ–Ω–∏.</p>
            </div>

            <h3>UrlGenerator</h3>
            <div class="api-method">
                <code class="method-sig">generate(string $name, array $params, array $query, bool $absolute): string</code>
                <p>–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å URL –∏–∑ –∏–º–µ–Ω–∏ –º–∞—Ä—à—Ä—É—Ç–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.</p>
            </div>
        </section>

        <!-- ============ DEVELOPMENT ============ -->
        <section class="doc-section" id="development">
            <h2>–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞</h2>
            <p>–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç <code>Makefile</code> —Å —Ç–∏–ø–∏—á–Ω—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:</p>
            <pre><code class="language-bash">make fix       # –ê–≤—Ç–æ-–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∏–ª—è –∫–æ–¥–∞ (PHP CS Fixer)
make cs-check  # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è –∫–æ–¥–∞ (dry-run)
make stan      # –ó–∞–ø—É—Å–∫ PHPStan —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ (—É—Ä–æ–≤–µ–Ω—å 9)
make test      # –ó–∞–ø—É—Å–∫ PHPUnit —Ç–µ—Å—Ç–æ–≤
make check     # –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ (cs-check + stan + test)
make all       # –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å—Ç–∏–ª—å, –∑–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç—å stan –∏ —Ç–µ—Å—Ç—ã</code></pre>
        </section>

        <!-- ============ FOOTER ============ -->
        <footer class="footer">
            <p>Waypoint &mdash; –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º, –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–æ <a href="https://opensource.org/licenses/MIT" target="_blank" rel="noopener">–ª–∏—Ü–µ–Ω–∑–∏–∏ MIT</a>.</p>
            <p class="footer-links">
                <a href="https://github.com/ascetic-soft/Waypoint" target="_blank" rel="noopener">GitHub</a>
                <span class="sep">&middot;</span>
                <a href="https://packagist.org/packages/ascetic-soft/waypoint" target="_blank" rel="noopener">Packagist</a>
                <span class="sep">&middot;</span>
                <a href="https://github.com/ascetic-soft/Waypoint/issues" target="_blank" rel="noopener">Issues</a>
            </p>
        </footer>
    </div>
</main>

<!-- ============ OVERLAY ============ -->
<div class="overlay" id="overlay"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/php.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/bash.min.js"></script>
<script src="assets/script.js"></script>
</body>
</html>
